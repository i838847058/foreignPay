import{d as e,z as a,A as l,a as s,r as t,o,K as r,c as u,e as d,f as i,w as n,j as c,F as p,y as v,J as m,T as _,p as f,h as g,i as h,m as b,M as w,L as y,s as V,I as C,R as k,S as x,x as j,v as z,E as U,_ as q}from"./index-2cb78bc5.js";import{E,a as D}from"./el-col-37336422.js";import{E as F}from"./el-switch-3a8fdfd4.js";/* empty css                        */import{h as I,i as M,j as R,k as S}from"./index-d3e2ba33.js";const T={class:"search-container"},$={class:"search-data"},A={class:"search-result"},J=(e=>(f("data-v-438355ea"),e=e(),g(),e))((()=>d("span",null,"汇率信息",-1))),K={class:"dialog-footer"},L=q(e({__name:"index",setup(e){const f=a(),g=l((()=>f.basicData.options.coin)),q=s({data:{}}),L=t(),O=t(),B=t(!1),G=t(),H=s({coin_id:[{required:!0,message:"请选择货币",trigger:"change"}],rate:[{required:!0,message:"请选择汇率",trigger:"change"},{validator:(e,a,l)=>{a?/^[0-9]+(\.[0-9]{1,2})?$/.test(a)?l():l(new Error("请输入数字，最多两位小数")):l(new Error("请输入汇率"))},trigger:"blur"}]});o((()=>{N()}));r(B,((e,a)=>{e?L.value||(O.value={coin_id:"",rate:""}):L.value=null}));const N=(e=1)=>{I({page:e}).then((e=>{q.data=e.data}))},P=e=>{V({title:"通知",message:`${e}成功`,type:"success",showClose:!1,duration:3e3}),B.value=!1,N()};return(e,a)=>{const l=v,s=C,t=F,o=m,r=k,f=x,I=j,Q=E,W=z,X=D,Y=U,Z=_;return h(),u(p,null,[d("div",T,[d("div",$,[d("div",A,[J,i(l,{type:"primary",size:"large",class:"search-bth",onClick:a[0]||(a[0]=e=>B.value=!0)},{default:n((()=>[b("新增汇率信息")])),_:1})]),i(o,{table:c(q).data,onCurrentChange:N},{default:n((()=>[i(s,{prop:"coin_id_text",label:"货币（1USDT）"}),i(s,{prop:"rate",label:"汇率"}),i(s,{prop:"status",label:"商户状态"},{default:n((e=>[i(t,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":0,onChange:a=>(({id:e,status:a})=>{S({id:e,status:a}).then((e=>{1===e.code&&V({title:"通知",message:"更改状态成功",type:"success",showClose:!1,duration:3e3})}))})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),i(s,{prop:"created",label:"汇率更新时间","min-width":"160"}),i(s,{fixed:"right",label:"操作",width:"120"},{default:n((e=>[i(l,{link:"",type:"primary",size:"small",onClick:a=>{return l=e.row,L.value=l,B.value=!0,O.value={...L.value},void O.value;var l}},{default:n((()=>[b(" 修改 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["table"])])]),i(Z,{modelValue:B.value,"onUpdate:modelValue":a[5]||(a[5]=e=>B.value=e),title:(L.value?"编辑":"新增")+"汇率信息",class:"sub-dialog",closeOnClickModal:!1,width:"756px","destroy-on-close":!0},{footer:n((()=>[d("span",K,[i(l,{onClick:a[3]||(a[3]=e=>B.value=!1),size:"large"},{default:n((()=>[b("取消")])),_:1}),i(l,{type:"primary",onClick:a[4]||(a[4]=e=>(async e=>{e&&await e.validate(((e,a)=>{e&&(L.value?M(O.value).then((e=>{1===e.code&&P("修改")})):R(O.value).then((e=>{1===e.code&&P("新增")})))}))})(G.value)),size:"large"},{default:n((()=>[b("保存")])),_:1})])])),default:n((()=>[i(Y,{model:O.value,ref_key:"ruleFormRef",ref:G,rules:H,"label-position":"top"},{default:n((()=>[i(X,{gutter:18},{default:n((()=>[i(Q,{span:12},{default:n((()=>[i(I,{label:"货币：",prop:"coin_id",required:""},{default:n((()=>[i(f,{modelValue:O.value.coin_id,"onUpdate:modelValue":a[1]||(a[1]=e=>O.value.coin_id=e),size:"large",placeholder:"请选择"},{default:n((()=>[(h(!0),u(p,null,w(c(g),((e,a)=>(h(),y(r,{label:e.value,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),i(Q,{span:12},{default:n((()=>[i(I,{label:"汇率：",prop:"rate",required:""},{default:n((()=>[i(W,{size:"large",modelValue:O.value.rate,"onUpdate:modelValue":a[2]||(a[2]=e=>O.value.rate=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])],64)}}}),[["__scopeId","data-v-438355ea"]]);export{L as default};
