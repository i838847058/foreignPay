import{d as a,r as e,a as s,u as l,b as r,t,o,g as d,c as i,e as u,f as n,w as c,E as p,p as m,h as g,i as f,j as v,k as w,l as b,m as h,n as y,q as _,s as V,v as q,x as k,y as x,_ as U}from"./index-2cb78bc5.js";const j=""+new URL("login-996560b2.png",import.meta.url).href,z=a=>(m("data-v-a1ce6b28"),a=a(),g(),a),C={class:"login-page"},R={class:"page-container"},D=z((()=>u("div",{class:"container-img"},[u("img",{src:j,loading:"lazy"})],-1))),E={class:"container-form"},F=z((()=>u("div",{class:"form-title"},"登录",-1))),I=["src"],L=U(a({__name:"index",setup(a){const m=e(),g=s({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),U=l(),j=r();let z=e("");const L=s({username:"",password:"",captcha:""});let{username:M,password:A,captcha:B}=t(L);o((()=>{G()}));const G=()=>{d().then((a=>{z.value=a}))},H=async()=>{await j.fetchMenuData()};return(a,e)=>{const s=q,l=k,r=x,t=p;return f(),i("div",C,[u("div",R,[D,u("div",E,[F,n(t,{ref_key:"ruleFormRef",ref:m,model:L,rules:g,"label-position":"top"},{default:c((()=>[n(l,{label:"用户名",prop:"username",required:""},{default:c((()=>[n(s,{modelValue:v(M),"onUpdate:modelValue":e[0]||(e[0]=a=>w(M)?M.value=a:M=a),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),n(l,{label:"密码",prop:"password",required:""},{default:c((()=>[n(s,{modelValue:v(A),"onUpdate:modelValue":e[1]||(e[1]=a=>w(A)?A.value=a:A=a),placeholder:"请输入",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),n(l,{label:"谷歌验证码（6位）",prop:"captcha",required:""},{default:c((()=>[n(s,{modelValue:v(B),"onUpdate:modelValue":e[2]||(e[2]=a=>w(B)?B.value=a:B=a),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),v(z)?(f(),i("img",{key:0,class:"verification-img",src:v(z),onClick:e[3]||(e[3]=a=>G()),loading:"lazy"},null,8,I)):b("",!0),n(r,{class:"submit-btn",type:"primary",onClick:e[4]||(e[4]=a=>(async a=>{a&&await a.validate((async(a,e)=>{if(a){const a=await y(L),{code:e,data:s,msg:l}=a;1===e?(H(),await U.login({...s.userinfo,password:L.password}),_.push("/data-statistics")):(V({title:"通知",message:l,type:"error"}),G())}}))})(m.value))},{default:c((()=>[h("登录")])),_:1})])),_:1},8,["model","rules"])])])])}}}),[["__scopeId","data-v-a1ce6b28"]]);export{L as default};
