import{k as e,d as a,E as l,B as s,J as t,F as o,G as r,i,y as u,h as d,A as n,j as p}from"./element-plus-7c00a5ec.js";import{b as m,d as c,_ as v}from"./index-61c15573.js";import{h as f,i as _,j as g,k as h}from"./index-e085eb87.js";import{F as j,y as b,K as y,e as w,i as V,f as k,c as C,a as x,P as z,S as U,u as q,Q as E,au as F,av as D,o as S,W as T,a9 as $,T as A}from"./@vue-83238ad5.js";import"./lodash-es-6861d6dc.js";import"./async-validator-cf877c1f.js";import"./@vueuse-974038d5.js";import"./dayjs-6442e2b1.js";import"./clipboard-690b0fc8.js";import"./@element-plus-9fff3ffd.js";import"./@ctrl-91de2ec7.js";import"./@popperjs-b78c3215.js";import"./escape-html-3c2115ff.js";import"./normalize-wheel-es-3222b0a2.js";import"./vue-router-62c38a24.js";import"./axios-a8ee11a1.js";import"./pinia-34541c90.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./zipson-d6101bf1.js";import"./mitt-f0e54764.js";const B={class:"search-container"},G={class:"search-data"},H={class:"search-result"},I=(e=>(F("data-v-438355ea"),e=e(),D(),e))((()=>x("span",null,"汇率信息",-1))),J={class:"dialog-footer"},K=v(j({__name:"index",setup(v){const j=m(),F=b((()=>j.basicData.options.coin)),D=y({data:{}}),K=w(),M=w(),O=w(!1),P=w(),Q=y({coin_id:[{required:!0,message:"请选择货币",trigger:"change"}],rate:[{required:!0,message:"请选择汇率",trigger:"change"},{validator:(e,a,l)=>{a?/^[0-9]+(\.[0-9]{1,2})?$/.test(a)?l():l(new Error("请输入数字，最多两位小数")):l(new Error("请输入汇率"))},trigger:"blur"}]});V((()=>{R()}));k(O,((e,a)=>{e?K.value||(M.value={coin_id:"",rate:""}):K.value=null}));const R=(e=1)=>{f({page:e}).then((e=>{D.data=e.data}))},W=e=>{l({title:"通知",message:`${e}成功`,type:"success",showClose:!1,duration:3e3}),O.value=!1,R()};return(m,v)=>{const f=e,j=s,b=t,y=c,w=o,V=r,k=i,L=u,N=d,X=n,Y=p,Z=a;return S(),C(E,null,[x("div",B,[x("div",G,[x("div",H,[I,z(f,{type:"primary",size:"large",class:"search-bth",onClick:v[0]||(v[0]=e=>O.value=!0)},{default:U((()=>[T("新增汇率信息")])),_:1})]),z(y,{table:q(D).data,onCurrentChange:R},{default:U((()=>[z(j,{prop:"coin_id_text",label:"货币（1USDT）"}),z(j,{prop:"rate",label:"汇率"}),z(j,{prop:"status",label:"商户状态"},{default:U((e=>[z(b,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":0,onChange:a=>(({id:e,status:a})=>{h({id:e,status:a}).then((e=>{1===e.code&&l({title:"通知",message:"更改状态成功",type:"success",showClose:!1,duration:3e3})}))})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),z(j,{prop:"created",label:"汇率更新时间","min-width":"160"}),z(j,{fixed:"right",label:"操作",width:"120"},{default:U((e=>[z(f,{link:"",type:"primary",size:"small",onClick:a=>{return l=e.row,K.value=l,O.value=!0,void(M.value={...K.value});var l}},{default:U((()=>[T(" 修改 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["table"])])]),z(Z,{modelValue:O.value,"onUpdate:modelValue":v[5]||(v[5]=e=>O.value=e),title:(K.value?"编辑":"新增")+"汇率信息",class:"sub-dialog",closeOnClickModal:!1,width:"756px","destroy-on-close":!0},{footer:U((()=>[x("span",J,[z(f,{onClick:v[3]||(v[3]=e=>O.value=!1),size:"large"},{default:U((()=>[T("取消")])),_:1}),z(f,{type:"primary",onClick:v[4]||(v[4]=e=>(async e=>{e&&await e.validate(((e,a)=>{e&&(K.value?_(M.value).then((e=>{1===e.code&&W("修改")})):g(M.value).then((e=>{1===e.code&&W("新增")})))}))})(P.value)),size:"large"},{default:U((()=>[T("保存")])),_:1})])])),default:U((()=>[z(Y,{model:M.value,ref_key:"ruleFormRef",ref:P,rules:Q,"label-position":"top"},{default:U((()=>[z(X,{gutter:18},{default:U((()=>[z(L,{span:12},{default:U((()=>[z(k,{label:"货币：",prop:"coin_id",required:""},{default:U((()=>[z(V,{modelValue:M.value.coin_id,"onUpdate:modelValue":v[1]||(v[1]=e=>M.value.coin_id=e),size:"large",placeholder:"请选择"},{default:U((()=>[(S(!0),C(E,null,$(q(F),((e,a)=>(S(),A(w,{label:e.value,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),z(L,{span:12},{default:U((()=>[z(k,{label:"汇率：",prop:"rate",required:""},{default:U((()=>[z(N,{size:"large",modelValue:M.value.rate,"onUpdate:modelValue":v[2]||(v[2]=e=>M.value.rate=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])],64)}}}),[["__scopeId","data-v-438355ea"]]);export{K as default};
