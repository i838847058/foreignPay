import{k as e,d as a,E as l,B as s,J as t,F as o,G as r,i,y as u,h as d,A as n,j as p}from"./element-plus-1f849017.js";import{b as m,d as c,_ as v}from"./index-a0d63162.js";import{h as f,i as _,j as g,k as h}from"./index-2d7979b4.js";import{d as j,y as b,J as y,e as V,i as w,f as k,c as C,a as x,O as z,R as U,u as q,P as E,at as D,au as F,o as J,V as O,a8 as R,S}from"./@vue-af2a374f.js";import"./lodash-es-968ab13b.js";import"./async-validator-cf877c1f.js";import"./@vueuse-be664744.js";import"./dayjs-3df08a9b.js";import"./clipboard-690b0fc8.js";import"./@element-plus-ce49c33a.js";import"./@ctrl-91de2ec7.js";import"./@popperjs-b78c3215.js";import"./escape-html-3c2115ff.js";import"./normalize-wheel-es-3222b0a2.js";import"./vue-router-0700730f.js";import"./axios-fb7d3bb8.js";import"./pinia-a9355e46.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./zipson-d6101bf1.js";import"./mitt-f0e54764.js";const $={class:"search-container"},A={class:"search-data"},B={class:"search-result"},G=(e=>(D("data-v-438355ea"),e=e(),F(),e))((()=>x("span",null,"汇率信息",-1))),H={class:"dialog-footer"},I=v(j({__name:"index",setup(v){const j=m(),D=b((()=>j.basicData.options.coin)),F=y({data:{}}),I=V(),M=V(),P=V(!1),T=V(),K=y({coin_id:[{required:!0,message:"请选择货币",trigger:"change"}],rate:[{required:!0,message:"请选择汇率",trigger:"change"},{validator:(e,a,l)=>{a?/^[0-9]+(\.[0-9]{1,2})?$/.test(a)?l():l(new Error("请输入数字，最多两位小数")):l(new Error("请输入汇率"))},trigger:"blur"}]});w((()=>{L()}));k(P,((e,a)=>{e?I.value||(M.value={coin_id:"",rate:""}):I.value=null}));const L=(e=1)=>{f({page:e}).then((e=>{F.data=e.data}))},N=e=>{l({title:"通知",message:`${e}成功`,type:"success",showClose:!1,duration:3e3}),P.value=!1,L()};return(m,v)=>{const f=e,j=s,b=t,y=c,V=o,w=r,k=i,Q=u,W=d,X=n,Y=p,Z=a;return J(),C(E,null,[x("div",$,[x("div",A,[x("div",B,[G,z(f,{type:"primary",size:"large",class:"search-bth",onClick:v[0]||(v[0]=e=>P.value=!0)},{default:U((()=>[O("新增汇率信息")])),_:1})]),z(y,{table:q(F).data,onCurrentChange:L},{default:U((()=>[z(j,{prop:"coin_id_text",label:"货币（1USDT）"}),z(j,{prop:"rate",label:"汇率"}),z(j,{prop:"status",label:"商户状态"},{default:U((e=>[z(b,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":0,onChange:a=>(({id:e,status:a})=>{h({id:e,status:a}).then((e=>{1===e.code&&l({title:"通知",message:"更改状态成功",type:"success",showClose:!1,duration:3e3})}))})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),z(j,{prop:"created",label:"汇率更新时间","min-width":"160"}),z(j,{fixed:"right",label:"操作",width:"120"},{default:U((e=>[z(f,{link:"",type:"primary",size:"small",onClick:a=>{return l=e.row,I.value=l,P.value=!0,void(M.value={...I.value});var l}},{default:U((()=>[O(" 修改 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["table"])])]),z(Z,{modelValue:P.value,"onUpdate:modelValue":v[5]||(v[5]=e=>P.value=e),title:(I.value?"编辑":"新增")+"汇率信息",class:"sub-dialog",closeOnClickModal:!1,width:"756px","destroy-on-close":!0},{footer:U((()=>[x("span",H,[z(f,{onClick:v[3]||(v[3]=e=>P.value=!1),size:"large"},{default:U((()=>[O("取消")])),_:1}),z(f,{type:"primary",onClick:v[4]||(v[4]=e=>(async e=>{e&&await e.validate(((e,a)=>{e&&(I.value?_(M.value).then((e=>{1===e.code&&N("修改")})):g(M.value).then((e=>{1===e.code&&N("新增")})))}))})(T.value)),size:"large"},{default:U((()=>[O("保存")])),_:1})])])),default:U((()=>[z(Y,{model:M.value,ref_key:"ruleFormRef",ref:T,rules:K,"label-position":"top"},{default:U((()=>[z(X,{gutter:18},{default:U((()=>[z(Q,{span:12},{default:U((()=>[z(k,{label:"货币：",prop:"coin_id",required:""},{default:U((()=>[z(w,{modelValue:M.value.coin_id,"onUpdate:modelValue":v[1]||(v[1]=e=>M.value.coin_id=e),size:"large",placeholder:"请选择"},{default:U((()=>[(J(!0),C(E,null,R(q(D),((e,a)=>(J(),S(V,{label:e.value,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),z(Q,{span:12},{default:U((()=>[z(k,{label:"汇率：",prop:"rate",required:""},{default:U((()=>[z(W,{size:"large",modelValue:M.value.rate,"onUpdate:modelValue":v[2]||(v[2]=e=>M.value.rate=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])],64)}}}),[["__scopeId","data-v-438355ea"]]);export{I as default};
