import{j as a,E as e,h as s,i as r,k as l}from"./element-plus-1f849017.js";import{u as t,a as o,g as i,l as p,r as d,_ as m}from"./index-a68c738b.js";import{d as u,e as n,J as c,K as g,i as j,c as f,a as v,O as h,R as w,at as b,au as y,o as _,u as V,B as k,X as q,V as x}from"./@vue-af2a374f.js";import"./lodash-es-968ab13b.js";import"./async-validator-cf877c1f.js";import"./@vueuse-be664744.js";import"./dayjs-3df08a9b.js";import"./clipboard-690b0fc8.js";import"./@element-plus-ce49c33a.js";import"./@ctrl-91de2ec7.js";import"./@popperjs-b78c3215.js";import"./escape-html-3c2115ff.js";import"./normalize-wheel-es-3222b0a2.js";import"./vue-router-0700730f.js";import"./axios-fb7d3bb8.js";import"./pinia-a9355e46.js";import"./pinia-plugin-persistedstate-d2bd58cf.js";import"./zipson-d6101bf1.js";import"./mitt-f0e54764.js";const z=""+new URL("../png/login-996560b2.png",import.meta.url).href,U=a=>(b("data-v-a1ce6b28"),a=a(),y(),a),R={class:"login-page"},C={class:"page-container"},B=U((()=>v("div",{class:"container-img"},[v("img",{src:z,loading:"lazy"})],-1))),D={class:"container-form"},E=U((()=>v("div",{class:"form-title"},"登录",-1))),F=["src"],I=m(u({__name:"index",setup(m){const u=n(),b=c({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),y=t(),z=o();let U=n("");const I=c({username:"",password:"",captcha:""});let{username:J,password:K,captcha:L}=g(I);j((()=>{M()}));const M=()=>{i().then((a=>{U.value=a}))},O=async()=>{await z.fetchMenuData()};return(t,o)=>{const i=s,m=r,n=l,c=a;return _(),f("div",R,[v("div",C,[B,v("div",D,[E,h(c,{ref_key:"ruleFormRef",ref:u,model:I,rules:b,"label-position":"top"},{default:w((()=>[h(m,{label:"用户名",prop:"username",required:""},{default:w((()=>[h(i,{modelValue:V(J),"onUpdate:modelValue":o[0]||(o[0]=a=>k(J)?J.value=a:J=a),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),h(m,{label:"密码",prop:"password",required:""},{default:w((()=>[h(i,{modelValue:V(K),"onUpdate:modelValue":o[1]||(o[1]=a=>k(K)?K.value=a:K=a),placeholder:"请输入",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),h(m,{label:"谷歌验证码（6位）",prop:"captcha",required:""},{default:w((()=>[h(i,{modelValue:V(L),"onUpdate:modelValue":o[2]||(o[2]=a=>k(L)?L.value=a:L=a),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(U)?(_(),f("img",{key:0,class:"verification-img",src:V(U),onClick:o[3]||(o[3]=a=>M()),loading:"lazy"},null,8,F)):q("",!0),h(n,{class:"submit-btn",type:"primary",onClick:o[4]||(o[4]=a=>(async a=>{a&&await a.validate((async(a,s)=>{if(a){const a=await p(I),{code:s,data:r,msg:l}=a;1===s?(O(),await y.login({...r.userinfo,password:I.password}),d.push("/data-statistics")):(e({title:"通知",message:l,type:"error"}),M())}}))})(u.value))},{default:w((()=>[x("登录")])),_:1})])),_:1},8,["model","rules"])])])])}}}),[["__scopeId","data-v-a1ce6b28"]]);export{I as default};
